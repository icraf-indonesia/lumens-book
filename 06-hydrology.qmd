# Hydrology {#sec-hydro}

---
title: "Quantification of Ecosystem Services – Hydrological Assessment (QuES-H)"
editor: 
  markdown: 
    wrap: sentence
---

## Description

This module estimates soil erosion by water using the Revised Universal Soil Loss Equation (RUSLE).
The result of this analysis allows stakeholders to understand the extent of erosion at one or two specified times across a given area, contributing to the formulation of spatially explicit strategies on enhancing soil conservation.

RUSLE is an empirical model widely used in soil conservation and watershed management.
It provides a method for estimating annual soil loss due to water erosion.
A key feature of RUSLE is predicting long-term average annual soil loss.

## Usage

### Workflow

The workflow for this module can be divided into four key steps.

1.  **Data preparation**.
    In this step, users prepare the necessary data, noting the correct input specifications.

2.  **Upload data**.
    Once all the data has been prepared, users input the data by clicking Browse or manually dragging the input data to the correct attribute.

3.  **Set parameters**.
    The user sets the parameters of the multiple time series analysis they wish to conduct, which includes map resolution, single or two step analysis options, and output directory.
    For single step analysis, the user must input the landcover map and assign the year of analysis.
    For two step analysis, the user must input T1 and T2 landcover map and assign the years for both data.
    Finally, the user selects the output directory they wish to have the results stored.

4.  **Analyze results**.
    Upon completion, the user will find the analysis results in the module or directly in the output folder.
    The module generates a webpage report containing a brief description of the module, summary of input data, and maps on soil loss analysis components.

![Workflow QuES-H](images/QuesH-1.png)

### Step-by-step instructions

**Step 1: Uploading Data**

1.  Input your data into the left-hand side of the module by selecting the ‘Browse’ button for each data or drag your file from your computer into the data input box.
    Ensure that you upload the correct data input for each parameter.
    A blue bar with ‘Upload complete’ will appear once you have successfully input your data for each parameter.

    -   Total Annual Precipitation Map: Click “Browse” and select your GeoTIFF file containing the total annual precipitation data (mm/year).

    -   Digital Elevation Model (DEM): Click “Browse” and select your GeoTIFF file containing the digital elevation model data (meters above sea level).

    -   Soil Properties:  Click “Browse” for each of the following soil property GeoTIFF files: Clay content (%); Silt content (%); Sand content (%); and Organic Soil content (%)

2.  Land Cover Map: Click “Browse” and select your GeoTIFF file containing the land cover classification data.

3.  Planning Units: Click “Browse” and select your planning unit shapefile.
    Select your planning unit file in .dbf, .prj, .shp, and .shx extensions.
    You may drag more than 1 file at once.

4.  Look-up Table for Land Use/Cover, C-factor, and P-factor: Click “Browse” and select your CSV file containing the lookup table with columns for:

    -   Land cover class

    -   C-factor value

    -   P-factor value

    ![Uploading Data into QuES-H LUMENS-shiny](images/QuesH-2.png)

**Step 2: Setting Analysis Parameters**

1.  Set your desired map resolution.
    The default map resolution is 100, meaning 1-pixel accounts for 100m x 100m.
    Note that the lower the resolution input means the more detailed each pixel can store information, hence will require longer processing time.

    ![](images/QuesH-3.png)

2.  Choose whether you would like to create a single or two step time series analysis by selecting the corresponding circle.

    ![](images/QuesH-4.png)

3.  Input your land cover/land use map and label the corresponding year (T1).
    If you selected two step time series analysis, do the same for your T2.

    ![](images/QuesH-5.png)

4.  Select your output directory where you wish to save your report.
    Finish by clicking ‘Select’.

    ![](images/QuesH6.png)

**Step 3: Running the Analysis**

1.  Click on ‘Run QuES-H Analysis’ to initiate the analysis.
    A progress bar will appear on the bottom right corner, indicating the analysis status.
    Once completed, you may access your results by clicking ‘Open Report’ or ‘Open Output Folder’.

    ![](images/QuesH-7.png)

### Tips

-   While detailed long-term data is preferred when available, this module focuses on methods using publicly available spatial data.

-   Users should ensure that all raster inputs are properly aligned (i.e., with identical projection systems, extents, and resolutions) and have consistent no-data values.

-   The look-up table allows flexibility in assigning C and P factors based on local conditions or literature values.

## Data Requirements

### Input Data & Parameters

|  |  |  |  |  |  |
|-----|----------|----------|----------|----------|--------------------|
| **No** | **Data Name** | **Type** | **Format** | **Projection Requirements** | **Description** |
| 1\. | Land Cover Map (Time 1) | Categorical raster | GeoTIFF | UTM | A map classifying land use types for the start year. |
| 2\. | Land Cover Map (Time 2) | Categorical raster | GeoTIFF | UTM | A map classifying land use types for the end year |
| 3\. | Total annual precipitation | Categorical raster | GeoTIFF |  | A map of total rainfall over a year (mm/year) |
| 4\. | Digital Elevation Model (DEM) | Categorical raster | GeoTIFF |  | A map of the terrain elevation (meters above sea level) |
| 5\. | Soil properties maps | Categorical raster | GeoTIFF |  | Maps of clay, silt, sand, and soil organic content. |
| 6\. | Land cover look up table | Table | CSV |  | A table containing raster values with corresponding land cover class. |
| 7\. | Planning unit | Vector | Shapefile |  | A polygon shapefile of administrative or management zones. |

### Example Datasets

Practice data sets used in this module can be accessed at **agroforestri.id/lumens-ques-h**

### Data Acquisition

Land cover maps can often be obtained from global or official national data.
For creating your own land cover maps from satellite imagery, consider using software such as Google Earth Engine, ArcGIS and R.

## Outputs

### Output Files
